<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="../icon/favicon.png">
    <title>Whispers in the Dark</title>
    <style>
      body {
        background-color: #000;
        color: #0f0;
        font-family: "VT323", monospace;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        padding: 20px;
        box-sizing: border-box;
        overflow: hidden;
      }
      #game-container {
        max-width: 800px;
        width: 100%;
        position: relative;
      }
      #crt-screen {
        position: relative;
        background-color: #0f0a;
        padding: 20px;
        border-radius: 20px;
        box-shadow:
          0 0 10px #0f0,
          0 0 20px #0f0,
          0 0 30px #0f0;
        overflow: hidden;
      }
      #crt-screen::before {
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: linear-gradient(
          to bottom,
          rgba(18, 16, 16, 0) 50%,
          rgba(0, 0, 0, 0.25) 50%
        );
        background-size: 100% 4px;
        z-index: 2;
        pointer-events: none;
      }
      #crt-screen::after {
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: rgba(18, 16, 16, 0.1);
        opacity: 0;
        z-index: 2;
        pointer-events: none;
      }
      #question {
        font-size: 1.2em;
        margin-bottom: 20px;
        text-shadow: 0 0 5px #0f0;
      }
      #choices {
        display: flex;
        flex-direction: column;
      }
      button {
        background-color: #000;
        color: #0f0;
        border: 1px solid #0f0;
        padding: 10px;
        margin: 5px 0;
        cursor: pointer;
        transition: all 0.3s;
        font-family: "VT323", monospace;
        font-size: 1em;
        text-shadow: 0 0 5px #0f0;
      }
      button:hover {
        background-color: #0f0;
        color: #000;
      }
      #status {
        margin-top: 20px;
        font-style: italic;
      }
      @keyframes flicker {
        0% {
          opacity: 0.9;
        }
        5% {
          opacity: 0.8;
        }
        10% {
          opacity: 0.9;
        }
        15% {
          opacity: 0.8;
        }
        20% {
          opacity: 1;
        }
        80% {
          opacity: 0.9;
        }
        85% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.9;
        }
        95% {
          opacity: 0.8;
        }
        100% {
          opacity: 0.9;
        }
      }
      #crt-screen {
        animation: flicker 5s infinite;
      }
    </style>
  </head>
  <body>
    <div id="game-container">
      <div id="crt-screen">
        <div id="question"></div>
        <div id="choices"></div>
        <div id="status"></div>
      </div>
    </div>

    <script>
      const questions = [
        {
          text: "You wake up in a dark room. There's a faint whisper coming from...",
          choices: [
            { text: "Under the bed", nextQuestion: 1 },
            { text: "Inside the closet", nextQuestion: 2 },
            { text: "Behind the mirror", nextQuestion: 3 },
          ],
        },
        {
          text: "You peer under the bed and see glowing eyes. They blink and ask, 'Do you want to play?'",
          choices: [
            { text: "Yes", nextQuestion: 4 },
            { text: "No", nextQuestion: 5 },
          ],
        },
        {
          text: "The closet door creaks open. A shadowy figure emerges and asks, 'Have you seen my child?'",
          choices: [
            { text: "Lie and say yes", nextQuestion: 6 },
            { text: "Tell the truth and say no", nextQuestion: 7 },
          ],
        },
        {
          text: "Your reflection in the mirror begins to move independently. It smiles and says, 'Let's switch places.'",
          choices: [
            { text: "Agree", nextQuestion: 8 },
            { text: "Refuse", nextQuestion: 9 },
          ],
        },
        {
          text: "The eyes grow larger, and a clawed hand reaches out. 'The game is hide and seek. You hide first.'",
          choices: [
            { text: "Hide in the attic", nextQuestion: 10 },
            { text: "Hide in the basement", nextQuestion: 11 },
          ],
        },
        {
          text: "The eyes narrow. 'Then you'll be my new toy.' The darkness under the bed starts to expand...",
          choices: [
            { text: "Run for the door", nextQuestion: 12 },
            { text: "Grab a nearby lamp as a weapon", nextQuestion: 13 },
          ],
        },
        {
          text: "The figure's face contorts in anger. 'Liar!' it shrieks, lunging towards you.",
          choices: [
            { text: "Dodge to the side", nextQuestion: 14 },
            { text: "Stand your ground", nextQuestion: 15 },
          ],
        },
        {
          text: "The figure slumps. 'Then you must help me find them.' It holds out a rusty key.",
          choices: [
            { text: "Take the key", nextQuestion: 16 },
            { text: "Refuse the key", nextQuestion: 17 },
          ],
        },
        {
          text: "You feel a cold sensation as you start to merge with the mirror. Your reflection whispers, 'Freedom at last.'",
          choices: [
            { text: "Try to break free", nextQuestion: 18 },
            { text: "Accept your fate", nextQuestion: 19 },
          ],
        },
        {
          text: "The mirror cracks. Your reflection snarls, 'You'll regret this!' Shards of glass fly towards you.",
          choices: [
            { text: "Shield your face", nextQuestion: 20 },
            { text: "Dive to the floor", nextQuestion: 21 },
          ],
        },
        {
          text: "In the attic, you find old photographs. The people in them seem to be staring at you, their eyes following your movements.",
          choices: [
            { text: "Examine the photos closer", nextQuestion: 22 },
            { text: "Look for a better hiding spot", nextQuestion: 23 },
          ],
        },
        {
          text: "The basement is filled with strange symbols carved into the walls. You hear footsteps coming down the stairs.",
          choices: [
            { text: "Hide behind old furniture", nextQuestion: 24 },
            { text: "Try to decipher the symbols", nextQuestion: 25 },
          ],
        },
        {
          text: "As you reach for the door, you realize it's locked. The darkness is getting closer...",
          choices: [
            { text: "Search for the key", nextQuestion: 26 },
            { text: "Try to break down the door", nextQuestion: 27 },
          ],
        },
        {
          text: "You grab the lamp, but it comes to life in your hands, its cord wrapping around your wrist like a snake.",
          choices: [
            { text: "Struggle to break free", nextQuestion: 28 },
            { text: "Use the lamp to fight the darkness", nextQuestion: 29 },
          ],
        },
        {
          text: "You successfully dodge, but find yourself in a different room. The walls are covered in writing: 'Don't look back.'",
          choices: [
            { text: "Look back", nextQuestion: 30 },
            { text: "Keep moving forward", nextQuestion: 31 },
          ],
        },
        {
          text: "The figure passes through you, leaving you feeling cold and empty. You hear a child's laughter echoing around you.",
          choices: [
            { text: "Follow the laughter", nextQuestion: 32 },
            { text: "Curl up and close your eyes", nextQuestion: 33 },
          ],
        },
        {
          text: "The key burns in your hand. Suddenly, you know exactly where the child is, but the knowledge is terrifying.",
          choices: [
            { text: "Go to the child", nextQuestion: 34 },
            { text: "Throw away the key", nextQuestion: 35 },
          ],
        },
        {
          text: "The figure disappears, but now you hear children's voices all around you, begging for help.",
          choices: [
            { text: "Try to help them", nextQuestion: 36 },
            { text: "Cover your ears and run", nextQuestion: 37 },
          ],
        },
        {
          text: "You manage to pull away, but part of your essence remains in the mirror. You feel... incomplete.",
          choices: [
            { text: "Look for a way to restore yourself", nextQuestion: 38 },
            { text: "Embrace your new partial existence", nextQuestion: 39 },
          ],
        },
        {
          text: "You're now trapped in the mirror world. Everything is familiar, yet wrong. Your reflection lives your life outside.",
          choices: [
            { text: "Try to communicate with the outside", nextQuestion: 40 },
            { text: "Explore the mirror world", nextQuestion: 41 },
          ],
        },
        {
          text: "The glass shards cut your arms, but miss your face. The mirror now shows hundreds of your reflections, all moving independently.",
          choices: [
            { text: "Smash the mirror completely", nextQuestion: 42 },
            { text: "Ask your reflections for help", nextQuestion: 43 },
          ],
        },
        {
          text: "You avoid injury, but now the room is filled with floating shards of glass, each reflecting a different scene of horror.",
          choices: [
            { text: "Close your eyes and wish it all away", nextQuestion: 44 },
            {
              text: "Navigate through the shards to the door",
              nextQuestion: 45,
            },
          ],
        },
        {
          text: "As you look closer, you realize one of the photos is of you, taken moments ago. In it, something stands behind you.",
          choices: [
            { text: "Turn around quickly", nextQuestion: 46 },
            { text: "Keep staring at the photo", nextQuestion: 47 },
          ],
        },
        {
          text: "You find a small door, just big enough to crawl through. From inside, you hear what sounds like your own voice calling for help.",
          choices: [
            { text: "Crawl through the door", nextQuestion: 48 },
            { text: "Find another hiding spot", nextQuestion: 49 },
          ],
        },
        {
          text: "You hide, but the furniture starts to creak and move. A voice whispers, 'I know you're here. Come out, come out...'",
          choices: [
            { text: "Stay hidden", nextQuestion: 50 },
            { text: "Run up the stairs", nextQuestion: 51 },
          ],
        },
        {
          text: "As you study the symbols, they start to rearrange themselves. You realize they're spelling out your name, over and over.",
          choices: [
            { text: "Touch the symbols", nextQuestion: 52 },
            { text: "Speak your name out loud", nextQuestion: 53 },
          ],
        },
        {
          text: "While searching, you find a key made of bone. The darkness has almost reached you.",
          choices: [
            { text: "Use the bone key", nextQuestion: 54 },
            { text: "Keep searching for a normal key", nextQuestion: 55 },
          ],
        },
        {
          text: "The door splinters, but doesn't break. On the other side, you hear multiple voices talking about you.",
          choices: [
            { text: "Listen to the conversation", nextQuestion: 56 },
            { text: "Keep trying to break the door", nextQuestion: 57 },
          ],
        },
        {
          text: "You break free, but the lamp shatters. In the darkness, you see countless pairs of eyes opening all around you.",
          choices: [
            { text: "Scream", nextQuestion: 58 },
            { text: "Stay completely still", nextQuestion: 59 },
          ],
        },
        {
          text: "The lamp's light pushes back the darkness, revealing a hidden door. But the light is fading fast...",
          choices: [
            { text: "Rush to the door", nextQuestion: 60 },
            { text: "Look for a way to recharge the lamp", nextQuestion: 61 },
          ],
        },
        {
          text: "You look back and see a grotesque figure rushing towards you. As it touches you, you wake up in your bed, heart pounding.",
          choices: [
            { text: "Go back to sleep", nextQuestion: 62 },
            { text: "Stay awake", nextQuestion: 63 },
          ],
        },
        {
          text: "You find yourself in a room filled with old TVs. Each one shows a different moment from your past. One TV catches your eye...",
          choices: [
            {
              text: "Watch a happy memory",
              nextQuestion: 64,
              consequence: "positive",
            },
            {
              text: "Watch a traumatic memory",
              nextQuestion: 65,
              consequence: "negative",
            },
          ],
        },
        {
          text: "You're in a long hallway with doors on both sides. You hear whispers coming from behind each door...",
          choices: [
            {
              text: "Open the door on the left",
              nextQuestion: 66,
              consequence: "neutral",
            },
            {
              text: "Open the door on the right",
              nextQuestion: 67,
              consequence: "neutral",
            },
          ],
        }
      ];

      let currentQuestion = 0;
      let sanity = 100;
      let artifacts = 0;

      function updateQuestion() {
        const question = questions[currentQuestion];
        document.getElementById("question").innerText = question.text;

        const choicesElement = document.getElementById("choices");
        choicesElement.innerHTML = "";
        question.choices.forEach((choice) => {
          const button = document.createElement("button");
          button.innerText = choice.text;
          button.onclick = () => makeChoice(choice);
          choicesElement.appendChild(button);
        });

        updateStatus();
      }

      function makeChoice(choice) {
        switch (choice.consequence) {
          case "positive":
            sanity += 5;
            break;
          case "negative":
            sanity -= 10;
            break;
          case "neutral":
            sanity -= Math.floor(Math.random() * 5) + 1;
            break;
        }

        if (choice.artifact) {
          artifacts++;
        }

        currentQuestion = choice.nextQuestion;
        if (
          currentQuestion >= questions.length ||
          sanity <= 0 ||
          artifacts >= 5
        ) {
          endGame();
        } else {
          updateQuestion();
        }
      }

      function updateStatus() {
        const statusElement = document.getElementById("status");
        statusElement.innerText = `Sanity: ${sanity}% | Artifacts: ${artifacts}/5`;
        if (sanity < 30) {
          statusElement.style.color = "#f00";
        } else if (sanity < 60) {
          statusElement.style.color = "#ff0";
        } else {
          statusElement.style.color = "#0f0";
        }
      }

      function endGame() {
        const gameContainer = document.getElementById("crt-screen");
        if (sanity <= 0) {
          gameContainer.innerHTML =
            "<h1>Bad Ending 1: You have lost your sanity. The darkness consumes you.</h1>";
        } else if (artifacts < 3) {
          gameContainer.innerHTML =
            "<h1>Bad Ending 2: You escape, but the horrors follow you into the real world.</h1>";
        } else if (artifacts >= 3 && artifacts < 5) {
          gameContainer.innerHTML =
            "<h1>Bad Ending 3: You survive, but at a great cost. Your mind will never be the same.</h1>";
        } else if (artifacts === 5 && sanity > 50) {
          gameContainer.innerHTML =
            "<h1>Good Ending: You have conquered the darkness and emerged stronger. The whispers fade away...</h1>";
        }
      }

      updateQuestion();
    </script>
  </body>
</html>
